import broadlink

class BroadDevice:
    air_condi_code = {"28" : b'&\x00\x88\x00\xd9\xee\x112\x11s\x111\x112\x121\x112\x111\x12r\x121\x11s\x11r\x121\x12r\x11s\x11r\x121\x11s\x112\x111\x112\x121\x112\x11r\x121\x121\x112\x111\x121\x121\x112\x112\x112\x111\x112\x112\x112\x111\x121\x11s\x112\x111\x121\x112\x112\x111\x121\x112\x112\x112\x111\x112\x112\x112\x111\x121\x11s\x112\x111\x12r\x112\x112\x111\x12r\x11s\x10\xf0\x12\x00\r\x05'
                , "27" : b'&\x00\x88\x00\xd9\xed\x121\x11s\x111\x121\x12r\x11s\x11r\x121\x121\x11s\x11r\x121\x12r\x11s\x11r\x121\x12r\x112\x111\x121\x12r\x11s\x11r\x121\x121\x112\x111\x121\x121\x112\x112\x112\x111\x112\x112\x112\x111\x121\x11s\x112\x111\x121\x112\x112\x111\x121\x112\x112\x112\x111\x112\x112\x112\x111\x121\x11s\x112\x111\x12r\x112\x112\x11r\x12r\x11s\x10\xf0\x12\x00\r\x05'
                , "26" : b'&\x00\x88\x00\xd9\xed\x121\x11s\x112\x112\x111\x11s\x11r\x121\x121\x11s\x11r\x122\x11r\x11s\x11r\x121\x121\x11s\x112\x111\x12r\x11s\x111\x122\x111\x112\x112\x112\x111\x121\x112\x112\x111\x121\x112\x112\x112\x111\x11s\x112\x112\x102\x121\x112\x112\x111\x121\x112\x112\x111\x121\x112\x103\x112\x111\x11s\x112\x112\x11r\x121\x112\x11s\x111\x12r\x10\xf1\x11\x00\r\x05'
                , "25" : b'&\x00\x88\x00\xda\xed\x130\x13q\x120\x121\x13q\x130\x12q\x130\x130\x13q\x12q\x130\x13q\x13q\x12q\x130\x130\x13q\x120\x130\x13q\x12r\x120\x130\x130\x130\x121\x120\x130\x130\x130\x121\x120\x130\x130\x121\x120\x130\x13q\x130\x120\x130\x130\x130\x130\x120\x130\x121\x130\x120\x130\x130\x130\x120\x130\x13q\x130\x121\x12q\x130\x13q\x13/\x130\x13q\x12\xef\x12\x00\r\x05'
                , "off" : b'&\x00\x88\x00\xd9\xee\x112\x11r\x112\x112\x11s\x11r\x12r\x112\x112\x11r\x121\x112\x11s\x11r\x12r\x112\x11s\x111\x121\x112\x112\x111\x121\x11s\x112\x112\x111\x112\x112\x112\x111\x112\x112\x112\x111\x121\x121\x112\x11r\x121\x121\x112\x111\x122\x111\x112\x112\x112\x111\x121\x112\x112\x111\x121\x112\x11s\x111\x121\x11s\x112\x11r\x12r\x112\x11s\x10\xf0\x11\x00\r\x05'
    }

    def __init__(self):
        devices = broadlink.discover()
        try :
            devices[0]
        except :
            raise ValueError("找不到裝置")
        self.device = devices[0]

        self.device.auth()

    def send_sign(self, sign:str):
        self.device.send_packet(self.air_condi_code[sign])




# broadlink.setup("GIJOE", '0920723736', 3)

# devices = broadlink.discover()

# print(devices)

# try :
#     devices[0]
# except :
#     raise ValueError("找不到裝置")
# device = devices[0]

# device.auth()

# device.enter_learning()

# packet = device.check_data()

